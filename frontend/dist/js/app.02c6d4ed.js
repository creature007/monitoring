(()=>{var s={5358:(s,e,a)=>{var t={"./af":5177,"./af.js":5177,"./ar":1509,"./ar-dz":1488,"./ar-dz.js":1488,"./ar-kw":8676,"./ar-kw.js":8676,"./ar-ly":2353,"./ar-ly.js":2353,"./ar-ma":4496,"./ar-ma.js":4496,"./ar-ps":6947,"./ar-ps.js":6947,"./ar-sa":2682,"./ar-sa.js":2682,"./ar-tn":9756,"./ar-tn.js":9756,"./ar.js":1509,"./az":5533,"./az.js":5533,"./be":8959,"./be.js":8959,"./bg":7777,"./bg.js":7777,"./bm":4903,"./bm.js":4903,"./bn":1290,"./bn-bd":7357,"./bn-bd.js":7357,"./bn.js":1290,"./bo":1545,"./bo.js":1545,"./br":1470,"./br.js":1470,"./bs":4429,"./bs.js":4429,"./ca":7306,"./ca.js":7306,"./cs":6464,"./cs.js":6464,"./cv":3635,"./cv.js":3635,"./cy":4226,"./cy.js":4226,"./da":3601,"./da.js":3601,"./de":7853,"./de-at":6111,"./de-at.js":6111,"./de-ch":4697,"./de-ch.js":4697,"./de.js":7853,"./dv":708,"./dv.js":708,"./el":4691,"./el.js":4691,"./en-au":3872,"./en-au.js":3872,"./en-ca":8298,"./en-ca.js":8298,"./en-gb":6195,"./en-gb.js":6195,"./en-ie":6584,"./en-ie.js":6584,"./en-il":5543,"./en-il.js":5543,"./en-in":9033,"./en-in.js":9033,"./en-nz":9402,"./en-nz.js":9402,"./en-sg":3004,"./en-sg.js":3004,"./eo":2934,"./eo.js":2934,"./es":7650,"./es-do":838,"./es-do.js":838,"./es-mx":7730,"./es-mx.js":7730,"./es-us":6575,"./es-us.js":6575,"./es.js":7650,"./et":3035,"./et.js":3035,"./eu":3508,"./eu.js":3508,"./fa":119,"./fa.js":119,"./fi":527,"./fi.js":527,"./fil":5995,"./fil.js":5995,"./fo":2477,"./fo.js":2477,"./fr":5498,"./fr-ca":6435,"./fr-ca.js":6435,"./fr-ch":7892,"./fr-ch.js":7892,"./fr.js":5498,"./fy":7071,"./fy.js":7071,"./ga":1734,"./ga.js":1734,"./gd":217,"./gd.js":217,"./gl":7329,"./gl.js":7329,"./gom-deva":2124,"./gom-deva.js":2124,"./gom-latn":3383,"./gom-latn.js":3383,"./gu":5050,"./gu.js":5050,"./he":1713,"./he.js":1713,"./hi":3861,"./hi.js":3861,"./hr":6308,"./hr.js":6308,"./hu":609,"./hu.js":609,"./hy-am":7160,"./hy-am.js":7160,"./id":4063,"./id.js":4063,"./is":9374,"./is.js":9374,"./it":8383,"./it-ch":1827,"./it-ch.js":1827,"./it.js":8383,"./ja":3827,"./ja.js":3827,"./jv":9722,"./jv.js":9722,"./ka":1794,"./ka.js":1794,"./kk":7088,"./kk.js":7088,"./km":6870,"./km.js":6870,"./kn":4451,"./kn.js":4451,"./ko":3164,"./ko.js":3164,"./ku":8174,"./ku-kmr":6181,"./ku-kmr.js":6181,"./ku.js":8174,"./ky":8474,"./ky.js":8474,"./lb":9680,"./lb.js":9680,"./lo":5867,"./lo.js":5867,"./lt":5766,"./lt.js":5766,"./lv":9532,"./lv.js":9532,"./me":8076,"./me.js":8076,"./mi":1848,"./mi.js":1848,"./mk":306,"./mk.js":306,"./ml":3739,"./ml.js":3739,"./mn":9053,"./mn.js":9053,"./mr":6169,"./mr.js":6169,"./ms":3386,"./ms-my":2297,"./ms-my.js":2297,"./ms.js":3386,"./mt":7075,"./mt.js":7075,"./my":2264,"./my.js":2264,"./nb":2274,"./nb.js":2274,"./ne":8235,"./ne.js":8235,"./nl":2572,"./nl-be":3784,"./nl-be.js":3784,"./nl.js":2572,"./nn":4566,"./nn.js":4566,"./oc-lnc":9330,"./oc-lnc.js":9330,"./pa-in":9849,"./pa-in.js":9849,"./pl":4418,"./pl.js":4418,"./pt":9834,"./pt-br":8303,"./pt-br.js":8303,"./pt.js":9834,"./ro":4457,"./ro.js":4457,"./ru":2271,"./ru.js":2271,"./sd":1221,"./sd.js":1221,"./se":3478,"./se.js":3478,"./si":7538,"./si.js":7538,"./sk":5784,"./sk.js":5784,"./sl":6637,"./sl.js":6637,"./sq":6794,"./sq.js":6794,"./sr":5719,"./sr-cyrl":3322,"./sr-cyrl.js":3322,"./sr.js":5719,"./ss":6e3,"./ss.js":6e3,"./sv":1011,"./sv.js":1011,"./sw":748,"./sw.js":748,"./ta":1025,"./ta.js":1025,"./te":1885,"./te.js":1885,"./tet":8861,"./tet.js":8861,"./tg":6571,"./tg.js":6571,"./th":5802,"./th.js":5802,"./tk":9527,"./tk.js":9527,"./tl-ph":9231,"./tl-ph.js":9231,"./tlh":1052,"./tlh.js":1052,"./tr":5096,"./tr.js":5096,"./tzl":9846,"./tzl.js":9846,"./tzm":1765,"./tzm-latn":7711,"./tzm-latn.js":7711,"./tzm.js":1765,"./ug-cn":8414,"./ug-cn.js":8414,"./uk":6618,"./uk.js":6618,"./ur":158,"./ur.js":158,"./uz":7609,"./uz-latn":2475,"./uz-latn.js":2475,"./uz.js":7609,"./vi":1135,"./vi.js":1135,"./x-pseudo":4051,"./x-pseudo.js":4051,"./yo":2218,"./yo.js":2218,"./zh-cn":2648,"./zh-cn.js":2648,"./zh-hk":1632,"./zh-hk.js":1632,"./zh-mo":1541,"./zh-mo.js":1541,"./zh-tw":304,"./zh-tw.js":304};function l(s){var e=i(s);return a(e)}function i(s){if(!a.o(t,s)){var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}return t[s]}l.keys=function(){return Object.keys(t)},l.resolve=i,s.exports=l,l.id=5358},8469:(s,e,a)=>{"use strict";var t=a(3751),l=a(641),i=a(33);const n={class:"app-container"},c={class:"sidebar"},o={class:"nav-links"},r={class:"main-content"},d={class:"top-bar"},u={class:"top-right"},v={class:"date-time"},p={class:"content-area"};function k(s,e,a,k,m,f){const b=(0,l.g2)("router-link"),h=(0,l.g2)("Toast"),L=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("nav",c,[e[3]||(e[3]=(0,l.Lk)("div",{class:"nav-brand"},[(0,l.Lk)("i",{class:"pi pi-server"}),(0,l.eW)(" Monitoring ")],-1)),(0,l.Lk)("div",o,[(0,l.bF)(b,{to:"/",class:"nav-link"},{default:(0,l.k6)(()=>e[0]||(e[0]=[(0,l.Lk)("i",{class:"pi pi-home"},null,-1),(0,l.Lk)("span",null,"Dashboard",-1)])),_:1,__:[0]}),(0,l.bF)(b,{to:"/statistics",class:"nav-link"},{default:(0,l.k6)(()=>e[1]||(e[1]=[(0,l.Lk)("i",{class:"pi pi-chart-bar"},null,-1),(0,l.Lk)("span",null,"Statistika",-1)])),_:1,__:[1]}),(0,l.bF)(b,{to:"/reports",class:"nav-link"},{default:(0,l.k6)(()=>e[2]||(e[2]=[(0,l.Lk)("i",{class:"pi pi-file"},null,-1),(0,l.Lk)("span",null,"Hisobotlar",-1)])),_:1,__:[2]})])]),(0,l.Lk)("main",r,[(0,l.Lk)("header",d,[e[6]||(e[6]=(0,l.Lk)("div",{class:"search-box"},[(0,l.Lk)("i",{class:"pi pi-search"}),(0,l.Lk)("input",{type:"text",placeholder:"Qidirish..."})],-1)),(0,l.Lk)("div",u,[(0,l.Lk)("span",v,(0,i.v_)(m.currentDateTime),1),e[4]||(e[4]=(0,l.Lk)("i",{class:"pi pi-bell"},null,-1)),e[5]||(e[5]=(0,l.Lk)("i",{class:"pi pi-user"},null,-1))])]),(0,l.Lk)("div",p,[(0,l.bF)(h),(0,l.bF)(L,null,{default:(0,l.k6)(({Component:s})=>[(0,l.bF)(t.eB,{name:"fade",mode:"out-in"},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)((0,l.$y)(s)))]),_:2},1024)]),_:1})])])])}var m=a(5093),f=a.n(m);const b={name:"App",data(){return{currentDateTime:""}},created(){this.updateDateTime(),setInterval(this.updateDateTime,1e3)},methods:{updateDateTime(){this.currentDateTime=f()().format("DD.MM.YYYY HH:mm:ss")}}};var h=a(6262);const L=(0,h.A)(b,[["render",k]]),j=L;var _=a(5220);const g={class:"dashboard"},y={class:"stats-cards"},F={class:"stat-value"},O={class:"stat-value"},C={class:"stat-value"},D={class:"table-header"},w={class:"device-info"},E={class:"device-details"},T={class:"device-name"},A={class:"device-location"},S={class:"last-seen"},x={key:0,class:"stats-info"},R={class:"stat-item"},I={class:"stat-details"},z={class:"stat-value-small"},W={class:"stat-item"},M={class:"stat-details"},V={class:"stat-value-small"};function Y(s,e,a,t,n,c){const o=(0,l.g2)("Card"),r=(0,l.g2)("Button"),d=(0,l.g2)("router-link"),u=(0,l.g2)("Column"),v=(0,l.g2)("DataTable");return(0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("div",y,[(0,l.bF)(o,{class:"stats-card"},{title:(0,l.k6)(()=>e[0]||(e[0]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-mobile"}),(0,l.eW)(" Jami qurilmalar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",F,(0,i.v_)(t.statistics?.total_devices||0),1)]),_:1}),(0,l.bF)(o,{class:"stats-card online"},{title:(0,l.k6)(()=>e[1]||(e[1]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-check-circle"}),(0,l.eW)(" Online qurilmalar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",O,(0,i.v_)(t.statistics?.online_devices||0),1)]),_:1}),(0,l.bF)(o,{class:"stats-card offline"},{title:(0,l.k6)(()=>e[2]||(e[2]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-times-circle"}),(0,l.eW)(" Offline qurilmalar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",C,(0,i.v_)(t.statistics?.offline_devices||0),1)]),_:1})]),(0,l.bF)(o,{class:"devices-table"},{title:(0,l.k6)(()=>[(0,l.Lk)("div",D,[e[3]||(e[3]=(0,l.Lk)("h2",null,"Qurilmalar ro'yxati",-1)),(0,l.bF)(r,{icon:"pi pi-refresh",onClick:t.refreshData},null,8,["onClick"])])]),content:(0,l.k6)(()=>[(0,l.bF)(v,{value:t.devices,paginator:!0,rows:20,scrollable:!0,scrollHeight:"calc(100vh - 400px)",responsiveLayout:"scroll",class:"p-datatable-sm custom-table",loading:t.loading,stripedRows:"",rowHover:!0},{default:(0,l.k6)(()=>[(0,l.bF)(u,{field:"number",header:"Qurilma nomi",sortable:""},{body:(0,l.k6)(s=>[(0,l.bF)(d,{to:"/device/"+s.data.id,class:"device-link"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",w,[e[4]||(e[4]=(0,l.Lk)("i",{class:"pi pi-desktop device-icon"},null,-1)),(0,l.Lk)("div",E,[(0,l.Lk)("span",T,(0,i.v_)(s.data.number),1),(0,l.Lk)("span",A,(0,i.v_)(s.data.description),1)])])]),_:2},1032,["to"])]),_:1}),(0,l.bF)(u,{field:"online",header:"Holat",sortable:""},{body:(0,l.k6)(s=>[(0,l.Lk)("span",{class:(0,i.C4)(["status-badge",s.data.online?"online":"offline"])},[(0,l.Lk)("i",{class:(0,i.C4)(["pi",s.data.online?"pi-check-circle":"pi-times-circle"])},null,2),(0,l.eW)(" "+(0,i.v_)(s.data.online?"Online":"Offline"),1)],2)]),_:1}),(0,l.bF)(u,{field:"last_seen",header:"Oxirgi faollik",sortable:""},{body:(0,l.k6)(s=>[(0,l.Lk)("div",S,[e[5]||(e[5]=(0,l.Lk)("i",{class:"pi pi-clock"},null,-1)),(0,l.eW)(" "+(0,i.v_)(s.data.last_seen),1)])]),_:1}),(0,l.bF)(u,{header:"Bugungi statistika"},{body:(0,l.k6)(s=>[s.data.today_stats?((0,l.uX)(),(0,l.CE)("div",x,[(0,l.Lk)("div",R,[e[7]||(e[7]=(0,l.Lk)("i",{class:"pi pi-check"},null,-1)),(0,l.Lk)("div",I,[e[6]||(e[6]=(0,l.Lk)("span",{class:"stat-label"},"Online",-1)),(0,l.Lk)("span",z,(0,i.v_)(s.data.today_stats.online_hours)+"s",1)])]),(0,l.Lk)("div",W,[e[9]||(e[9]=(0,l.Lk)("i",{class:"pi pi-times"},null,-1)),(0,l.Lk)("div",M,[e[8]||(e[8]=(0,l.Lk)("span",{class:"stat-label"},"Offline",-1)),(0,l.Lk)("span",V,(0,i.v_)(s.data.today_stats.offline_hours)+"s",1)])])])):(0,l.Q3)("",!0)]),_:1})]),_:1},8,["value","loading"])]),_:1})])}var q=a(6278);const H={name:"Dashboard",setup(){const s=(0,q.Pj)(),e=(0,l.EW)(()=>s.state.devices),a=(0,l.EW)(()=>s.state.statistics),t=(0,l.EW)(()=>s.state.loading),i=async()=>{await s.dispatch("fetchDevices"),await s.dispatch("fetchStatistics")};return(0,l.sV)(()=>{i()}),{devices:e,statistics:a,loading:t,refreshData:i}}},P=(0,h.A)(H,[["render",Y],["__scopeId","data-v-79d98d75"]]),N=P,Q={key:0,class:"device-details"},X={class:"header"},B={class:"detail-cards"},K={class:"info-grid"},U={class:"info-item"},$={class:"info-item"},G={class:"info-item"},J={class:"info-item"},Z={class:"info-item"},ss={class:"stats-container"},es={class:"period-stats"},as={key:0,class:"stats-grid"},ts={class:"stat-box online"},ls={class:"stat-box offline"},is={class:"period-stats"},ns={key:0,class:"stats-grid"},cs={class:"stat-box online"},os={class:"stat-box offline"},rs={class:"date-range"},ds={key:0,class:"history-stats"};function us(s,e,a,t,n,c){const o=(0,l.g2)("Button"),r=(0,l.g2)("Card"),d=(0,l.g2)("Calendar"),u=(0,l.g2)("Chart");return t.device?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("div",X,[(0,l.bF)(o,{icon:"pi pi-arrow-left",onClick:e[0]||(e[0]=e=>s.$router.push("/")),label:"Orqaga"}),(0,l.Lk)("h1",null,(0,i.v_)(t.device.number),1)]),(0,l.Lk)("div",B,[(0,l.bF)(r,{class:"detail-card"},{title:(0,l.k6)(()=>e[3]||(e[3]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-info-circle"}),(0,l.eW)(" Asosiy ma'lumotlar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",K,[(0,l.Lk)("div",U,[e[4]||(e[4]=(0,l.Lk)("label",null,"Holat",-1)),(0,l.Lk)("span",{class:(0,i.C4)(["status-badge",t.device.online?"online":"offline"])},(0,i.v_)(t.device.online?"Online":"Offline"),3)]),(0,l.Lk)("div",$,[e[5]||(e[5]=(0,l.Lk)("label",null,"Oxirgi faollik",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.last_seen),1)]),(0,l.Lk)("div",G,[e[6]||(e[6]=(0,l.Lk)("label",null,"IMEI",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.imei||"Mavjud emas"),1)]),(0,l.Lk)("div",J,[e[7]||(e[7]=(0,l.Lk)("label",null,"Telefon",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.phone||"Mavjud emas"),1)]),(0,l.Lk)("div",Z,[e[8]||(e[8]=(0,l.Lk)("label",null,"IP manzil",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.publicip||"Mavjud emas"),1)])])]),_:1}),(0,l.bF)(r,{class:"detail-card"},{title:(0,l.k6)(()=>e[9]||(e[9]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-chart-line"}),(0,l.eW)(" Statistika ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",ss,[(0,l.Lk)("div",es,[e[12]||(e[12]=(0,l.Lk)("h3",null,"Bugungi",-1)),t.device.today_stats?((0,l.uX)(),(0,l.CE)("div",as,[(0,l.Lk)("div",ts,[e[10]||(e[10]=(0,l.Lk)("label",null,"Online",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.today_stats.online_hours)+"s",1)]),(0,l.Lk)("div",ls,[e[11]||(e[11]=(0,l.Lk)("label",null,"Offline",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.today_stats.offline_hours)+"s",1)])])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",is,[e[15]||(e[15]=(0,l.Lk)("h3",null,"Haftalik",-1)),t.device.weekly_stats?((0,l.uX)(),(0,l.CE)("div",ns,[(0,l.Lk)("div",cs,[e[13]||(e[13]=(0,l.Lk)("label",null,"Online",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.weekly_stats.online_hours)+"s",1)]),(0,l.Lk)("div",os,[e[14]||(e[14]=(0,l.Lk)("label",null,"Offline",-1)),(0,l.Lk)("span",null,(0,i.v_)(t.device.weekly_stats.offline_hours)+"s",1)])])):(0,l.Q3)("",!0)])])]),_:1})]),(0,l.bF)(r,{class:"history-card"},{title:(0,l.k6)(()=>e[16]||(e[16]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-calendar"}),(0,l.eW)(" Davr bo'yicha statistika ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",rs,[(0,l.bF)(d,{modelValue:t.startDate,"onUpdate:modelValue":e[1]||(e[1]=s=>t.startDate=s),dateFormat:"yy-mm-dd",placeholder:"Boshlanish sanasi"},null,8,["modelValue"]),(0,l.bF)(d,{modelValue:t.endDate,"onUpdate:modelValue":e[2]||(e[2]=s=>t.endDate=s),dateFormat:"yy-mm-dd",placeholder:"Tugash sanasi"},null,8,["modelValue"]),(0,l.bF)(o,{label:"Ko'rish",icon:"pi pi-search",onClick:t.fetchDateRangeStats},null,8,["onClick"])]),t.dateRangeStats?((0,l.uX)(),(0,l.CE)("div",ds,[(0,l.bF)(u,{type:"line",data:t.chartData,options:t.chartOptions,style:{height:"300px"}},null,8,["data","options"])])):(0,l.Q3)("",!0)]),_:1})])):(0,l.Q3)("",!0)}var vs=a(953),ps=a(4335);const ks={name:"DeviceDetails",setup(){const s=(0,q.Pj)(),e=(0,_.lq)(),a=parseInt(e.params.id),t=(0,vs.KR)(null),i=(0,vs.KR)(null),n=(0,vs.KR)(null),c=(0,l.EW)(()=>s.getters.deviceById(a)),o=(0,l.EW)(()=>{if(!n.value)return null;const s=Object.keys(n.value),e=s.map(s=>n.value[s].online_hours),a=s.map(s=>n.value[s].offline_hours);return{labels:s,datasets:[{label:"Online soatlar",data:e,borderColor:"#4caf50",tension:.4},{label:"Offline soatlar",data:a,borderColor:"#f44336",tension:.4}]}}),r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}},d=async()=>{if(t.value&&i.value)try{const s=await ps.A.get(`http://127.0.0.1:8007/api/device-stats/${a}`,{params:{start_date:f()(t.value).format("YYYY-MM-DD"),end_date:f()(i.value).format("YYYY-MM-DD")}});n.value=s.data.stats}catch(s){console.error("Statistika olishda xatolik:",s)}};return(0,l.sV)(()=>{c.value||s.dispatch("fetchDevices")}),{device:c,startDate:t,endDate:i,dateRangeStats:n,chartData:o,chartOptions:r,fetchDateRangeStats:d}}},ms=(0,h.A)(ks,[["render",us],["__scopeId","data-v-319f5ad0"]]),fs=ms,bs={class:"statistics"},hs={class:"stats-overview"},Ls={class:"stat-content"},js={class:"stat-value"},_s={class:"stat-content"},gs={class:"stat-value"},ys={class:"stat-percentage"},Fs={class:"stat-content"},Os={class:"stat-value"},Cs={class:"stat-percentage"},Ds={class:"activity-list"},ws={class:"activity-info"},Es={class:"activity-device"},Ts={class:"activity-time"};function As(s,e,a,t,n,c){const o=(0,l.g2)("Card"),r=(0,l.g2)("Chart");return(0,l.uX)(),(0,l.CE)("div",bs,[e[6]||(e[6]=(0,l.Lk)("h1",null,"Umumiy statistika",-1)),(0,l.Lk)("div",hs,[(0,l.bF)(o,{class:"stats-card total"},{title:(0,l.k6)(()=>e[0]||(e[0]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-mobile"}),(0,l.eW)(" Jami qurilmalar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",Ls,[(0,l.Lk)("div",js,(0,i.v_)(t.statistics?.total_devices||0),1)])]),_:1}),(0,l.bF)(o,{class:"stats-card online"},{title:(0,l.k6)(()=>e[1]||(e[1]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-check-circle"}),(0,l.eW)(" Online qurilmalar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",_s,[(0,l.Lk)("div",gs,(0,i.v_)(t.statistics?.online_devices||0),1),(0,l.Lk)("div",ys,(0,i.v_)(t.statistics?.online_percentage||0)+"%",1)])]),_:1}),(0,l.bF)(o,{class:"stats-card offline"},{title:(0,l.k6)(()=>e[2]||(e[2]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-times-circle"}),(0,l.eW)(" Offline qurilmalar ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",Fs,[(0,l.Lk)("div",Os,(0,i.v_)(t.statistics?.offline_devices||0),1),(0,l.Lk)("div",Cs,(0,i.v_)(100-(t.statistics?.online_percentage||0))+"%",1)])]),_:1})]),(0,l.bF)(o,{class:"chart-card"},{title:(0,l.k6)(()=>e[3]||(e[3]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-chart-pie"}),(0,l.eW)(" Qurilmalar holati ")],-1)])),content:(0,l.k6)(()=>[(0,l.bF)(r,{type:"doughnut",data:t.chartData,options:t.chartOptions,style:{height:"300px"}},null,8,["data","options"])]),_:1}),(0,l.bF)(o,{class:"activity-card"},{title:(0,l.k6)(()=>e[4]||(e[4]=[(0,l.Lk)("div",{class:"card-title"},[(0,l.Lk)("i",{class:"pi pi-clock"}),(0,l.eW)(" Oxirgi faoliyat ")],-1)])),content:(0,l.k6)(()=>[(0,l.Lk)("div",Ds,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.statistics?.recent_activity,(s,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"activity-item"},[e[5]||(e[5]=(0,l.Lk)("i",{class:"pi pi-mobile"},null,-1)),(0,l.Lk)("div",ws,[(0,l.Lk)("div",Es,(0,i.v_)(s.device),1),(0,l.Lk)("div",Ts,(0,i.v_)(s.last_seen),1)])]))),128))])]),_:1})])}const Ss={name:"Statistics",setup(){const s=(0,q.Pj)(),e=(0,l.EW)(()=>s.state.statistics),a=(0,l.EW)(()=>({labels:["Online","Offline"],datasets:[{data:[e.value?.online_devices||0,e.value?.offline_devices||0],backgroundColor:["#4caf50","#f44336"],hoverBackgroundColor:["#66bb6a","#ef5350"]}]})),t={responsive:!0,maintainAspectRatio:!1,cutout:"60%",plugins:{legend:{position:"bottom"}}};return(0,l.sV)(()=>{s.dispatch("fetchStatistics")}),{statistics:e,chartData:a,chartOptions:t}}},xs=(0,h.A)(Ss,[["render",As],["__scopeId","data-v-b44f7cea"]]),Rs=xs,Is={class:"reports"},zs={class:"reports-header"},Ws={class:"header-content"},Ms={class:"summary-info"},Vs={class:"stat-item"},Ys={class:"stat-value"},qs={class:"stat-item success"},Hs={class:"stat-value"},Ps={class:"stat-item danger"},Ns={class:"stat-value"},Qs={class:"stat-item info"},Xs={class:"stat-value"},Bs={class:"period-selector"},Ks={class:"period-buttons"},Us={key:0,class:"report-content"},$s={class:"report-overview"},Gs={class:"stats-grid"},Js={class:"stat-info"},Zs={class:"stat-value"},se={class:"stat-info"},ee={class:"stat-value"},ae={class:"stat-percentage"},te={class:"stat-info"},le={class:"stat-value"},ie={class:"stat-percentage"},ne={class:"stat-info"},ce={class:"stat-value"},oe={class:"table-header"},re={class:"header-actions"},de={key:0,class:"filters-panel"},ue={class:"filter-group"},ve={class:"filter-group"},pe={class:"filter-group"},ke={class:"filter-value"},me={class:"device-cell"},fe={class:"device-info"},be={class:"device-name"},he={class:"device-description"},Le={class:"timestamp-cell"},je={class:"time"};function _e(s,e,a,t,n,c){const o=(0,l.g2)("Button"),r=(0,l.g2)("Card"),d=(0,l.g2)("MultiSelect"),u=(0,l.g2)("Slider"),v=(0,l.g2)("Column"),p=(0,l.g2)("DataTable");return(0,l.uX)(),(0,l.CE)("div",Is,[(0,l.Lk)("div",zs,[(0,l.Lk)("div",Ws,[e[10]||(e[10]=(0,l.Lk)("h1",null,"Qurilmalar hisoboti",-1)),(0,l.Lk)("div",Ms,[(0,l.Lk)("div",Vs,[(0,l.Lk)("span",Ys,(0,i.v_)(t.report?.total_devices||0),1),e[6]||(e[6]=(0,l.Lk)("span",{class:"stat-label"},"Jami qurilmalar",-1))]),(0,l.Lk)("div",qs,[(0,l.Lk)("span",Hs,(0,i.v_)(t.report?.active_devices||0),1),e[7]||(e[7]=(0,l.Lk)("span",{class:"stat-label"},"Faol",-1))]),(0,l.Lk)("div",Ps,[(0,l.Lk)("span",Ns,(0,i.v_)(t.report?.inactive_devices||0),1),e[8]||(e[8]=(0,l.Lk)("span",{class:"stat-label"},"Nofaol",-1))]),(0,l.Lk)("div",Qs,[(0,l.Lk)("span",Xs,(0,i.v_)(t.calculateAverageUptime(t.report?.devices))+"%",1),e[9]||(e[9]=(0,l.Lk)("span",{class:"stat-label"},"O'rtacha ishlash",-1))])])]),(0,l.Lk)("div",Bs,[e[11]||(e[11]=(0,l.Lk)("span",{class:"period-label"},"Davr:",-1)),(0,l.Lk)("div",Ks,[(0,l.bF)(o,{class:(0,i.C4)([{active:"daily"===t.period},"p-button-rounded"]),onClick:e[0]||(e[0]=s=>t.setPeriod("daily")),label:"Kunlik",icon:"pi pi-calendar"},null,8,["class"]),(0,l.bF)(o,{class:(0,i.C4)([{active:"weekly"===t.period},"p-button-rounded"]),onClick:e[1]||(e[1]=s=>t.setPeriod("weekly")),label:"Haftalik",icon:"pi pi-calendar-week"},null,8,["class"]),(0,l.bF)(o,{class:(0,i.C4)([{active:"monthly"===t.period},"p-button-rounded"]),onClick:e[2]||(e[2]=s=>t.setPeriod("monthly")),label:"Oylik",icon:"pi pi-calendar-plus"},null,8,["class"])])])]),t.report?((0,l.uX)(),(0,l.CE)("div",Us,[(0,l.Lk)("div",$s,[(0,l.Lk)("div",Gs,[(0,l.bF)(r,{class:"stat-card total"},{content:(0,l.k6)(()=>[e[13]||(e[13]=(0,l.Lk)("div",{class:"stat-icon"},[(0,l.Lk)("i",{class:"pi pi-server"})],-1)),(0,l.Lk)("div",Js,[(0,l.Lk)("span",Zs,(0,i.v_)(t.report.total_devices),1),e[12]||(e[12]=(0,l.Lk)("span",{class:"stat-label"},"Jami qurilmalar",-1))])]),_:1}),(0,l.bF)(r,{class:"stat-card active"},{content:(0,l.k6)(()=>[e[15]||(e[15]=(0,l.Lk)("div",{class:"stat-icon"},[(0,l.Lk)("i",{class:"pi pi-check-circle"})],-1)),(0,l.Lk)("div",se,[(0,l.Lk)("span",ee,(0,i.v_)(t.report.active_devices),1),e[14]||(e[14]=(0,l.Lk)("span",{class:"stat-label"},"Faol qurilmalar",-1)),(0,l.Lk)("span",ae,(0,i.v_)((t.report.active_devices/t.report.total_devices*100).toFixed(1))+"%",1)])]),_:1}),(0,l.bF)(r,{class:"stat-card inactive"},{content:(0,l.k6)(()=>[e[17]||(e[17]=(0,l.Lk)("div",{class:"stat-icon"},[(0,l.Lk)("i",{class:"pi pi-times-circle"})],-1)),(0,l.Lk)("div",te,[(0,l.Lk)("span",le,(0,i.v_)(t.report.inactive_devices),1),e[16]||(e[16]=(0,l.Lk)("span",{class:"stat-label"},"Nofaol qurilmalar",-1)),(0,l.Lk)("span",ie,(0,i.v_)((t.report.inactive_devices/t.report.total_devices*100).toFixed(1))+"%",1)])]),_:1}),(0,l.bF)(r,{class:"stat-card uptime"},{content:(0,l.k6)(()=>[e[19]||(e[19]=(0,l.Lk)("div",{class:"stat-icon"},[(0,l.Lk)("i",{class:"pi pi-clock"})],-1)),(0,l.Lk)("div",ne,[(0,l.Lk)("span",ce,(0,i.v_)(t.calculateAverageUptime(t.report.devices))+"%",1),e[18]||(e[18]=(0,l.Lk)("span",{class:"stat-label"},"O'rtacha ishlash vaqti",-1))])]),_:1})]),(0,l.bF)(r,{class:"details-table"},{title:(0,l.k6)(()=>[(0,l.Lk)("div",oe,[e[20]||(e[20]=(0,l.Lk)("div",{class:"header-left"},[(0,l.Lk)("i",{class:"pi pi-list"}),(0,l.Lk)("h2",null,"Batafsil ma'lumotlar")],-1)),(0,l.Lk)("div",re,[(0,l.bF)(o,{icon:"pi pi-filter",label:"Filtrlash",class:"p-button-outlined",onClick:t.toggleFilters},null,8,["onClick"]),(0,l.bF)(o,{icon:"pi pi-download",label:"Hisobotni yuklash",onClick:t.downloadReport},null,8,["onClick"])])])]),content:(0,l.k6)(()=>[t.showFilters?((0,l.uX)(),(0,l.CE)("div",de,[(0,l.Lk)("div",ue,[e[21]||(e[21]=(0,l.Lk)("label",null,"Holat",-1)),(0,l.bF)(d,{modelValue:t.filters.status,"onUpdate:modelValue":e[3]||(e[3]=s=>t.filters.status=s),options:t.statusOptions,optionLabel:"name",placeholder:"Tanlang",class:"filter-input"},null,8,["modelValue","options"])]),(0,l.Lk)("div",ve,[e[22]||(e[22]=(0,l.Lk)("label",null,"Joylashuv",-1)),(0,l.bF)(d,{modelValue:t.filters.location,"onUpdate:modelValue":e[4]||(e[4]=s=>t.filters.location=s),options:t.locationOptions,optionLabel:"name",placeholder:"Tanlang",class:"filter-input"},null,8,["modelValue","options"])]),(0,l.Lk)("div",pe,[e[23]||(e[23]=(0,l.Lk)("label",null,"Ishlash vaqti",-1)),(0,l.bF)(u,{modelValue:t.filters.uptime,"onUpdate:modelValue":e[5]||(e[5]=s=>t.filters.uptime=s),range:"",class:"filter-slider"},null,8,["modelValue"]),(0,l.Lk)("span",ke,(0,i.v_)(t.filters.uptime[0])+"% - "+(0,i.v_)(t.filters.uptime[1])+"%",1)])])):(0,l.Q3)("",!0),(0,l.bF)(p,{value:t.filteredDevices,paginator:!0,rows:20,paginatorTemplate:"PageLinks",class:"p-datatable-sm devices-list",loading:t.loading,sortField:"lastupdate",sortOrder:-1,rowHover:!0,responsiveLayout:"scroll",stripedRows:""},{default:(0,l.k6)(()=>[(0,l.bF)(v,{field:"number",header:"Qurilma nomi",sortable:"",style:{width:"300px"}},{body:(0,l.k6)(s=>[(0,l.Lk)("div",me,[e[24]||(e[24]=(0,l.Lk)("div",{class:"device-icon"},[(0,l.Lk)("i",{class:"pi pi-desktop"})],-1)),(0,l.Lk)("div",fe,[(0,l.Lk)("span",be,(0,i.v_)(s.data.number),1),(0,l.Lk)("span",he,(0,i.v_)(s.data.description),1)])])]),_:1}),(0,l.bF)(v,{field:"status_period",header:"Holat",sortable:"",style:{width:"120px"}},{body:(0,l.k6)(s=>[(0,l.Lk)("span",{class:(0,i.C4)(["device-status",s.data.status_period])},(0,i.v_)("active"===s.data.status_period?"Online":"Offline"),3)]),_:1}),(0,l.bF)(v,{field:"lastupdate",header:"Oxirgi faollik",sortable:"",style:{width:"200px"}},{body:(0,l.k6)(s=>[(0,l.Lk)("div",Le,[(0,l.Lk)("span",je,(0,i.v_)(t.formatDate(s.data.lastupdate)),1)])]),_:1})]),_:1},8,["value","loading"])]),_:1})])])):(0,l.Q3)("",!0)])}const ge={name:"Reports",setup(){(0,q.Pj)();const s=(0,vs.KR)("weekly"),e=(0,vs.KR)(null),a=(0,vs.KR)(!1),t=(0,vs.KR)(!1),i=(0,vs.KR)([]),n=(0,vs.KR)({status:[],location:[],uptime:[0,100]}),c=[{name:"Faol",value:"active"},{name:"Nofaol",value:"inactive"}],o=(0,l.EW)(()=>{if(!e.value?.devices)return[];const s=[...new Set(e.value.devices.map(s=>s.description))];return s.map(s=>({name:s,value:s}))}),r=(0,l.EW)(()=>e.value?.devices?e.value.devices.filter(s=>{const e=0===n.value.status.length||n.value.status.includes(s.status_period),a=0===n.value.location.length||n.value.location.includes(s.description),t=s.uptime>=n.value.uptime[0]&&s.uptime<=n.value.uptime[1];return e&&a&&t}):[]),d=async()=>{a.value=!0;try{const a=await fetch(`http://127.0.0.1:8007/api/report?type=${s.value}`),t=await a.json();e.value=t.report,e.value.devices=e.value.devices.map(s=>({...s,uptime:u(s)}))}catch(t){console.error("Hisobot olishda xatolik:",t)}finally{a.value=!1}},u=s=>Math.floor(50*Math.random()+50),v=s=>{if(!s||0===s.length)return 0;const e=s.reduce((s,e)=>s+e.uptime,0);return(e/s.length).toFixed(1)},p=async e=>{s.value=e,await d()},k=()=>{t.value=!t.value},m=s=>s?f()(s).format("DD.MM.YYYY HH:mm"):"Mavjud emas",b=()=>{if(!e.value)return;const a=i.value.length>0?i.value:e.value.devices,t=a.map(s=>({Qurilma:s.number,Tavsif:s.description||"",Holat:"active"===s.status_period?"Faol":"Nofaol","Ishlash vaqti":`${s.uptime}%`,"Oxirgi faollik":m(s.lastupdate)})),l="data:text/csv;charset=utf-8,"+Object.keys(t[0]).join(",")+"\n"+t.map(s=>Object.values(s).join(",")).join("\n"),n=encodeURI(l),c=document.createElement("a");c.setAttribute("href",n),c.setAttribute("download",`qurilmalar_hisoboti_${s.value}_${f()().format("YYYY-MM-DD")}.csv`),document.body.appendChild(c),c.click(),document.body.removeChild(c)};return(0,l.sV)(()=>{d()}),{period:s,report:e,loading:a,showFilters:t,selectedDevices:i,filters:n,statusOptions:c,locationOptions:o,filteredDevices:r,setPeriod:p,toggleFilters:k,formatDate:m,downloadReport:b,calculateAverageUptime:v}}},ye=(0,h.A)(ge,[["render",_e],["__scopeId","data-v-86c492d6"]]),Fe=ye,Oe=[{path:"/",name:"Dashboard",component:N},{path:"/device/:id",name:"DeviceDetails",component:fs,props:!0},{path:"/statistics",name:"Statistics",component:Rs},{path:"/reports",name:"Reports",component:Fe}],Ce=(0,_.aE)({history:(0,_.LA)("/"),routes:Oe}),De=Ce,we=(0,q.y$)({state:{devices:[],statistics:null,loading:!1,error:null},mutations:{SET_DEVICES(s,e){s.devices=e},SET_STATISTICS(s,e){s.statistics=e},SET_LOADING(s,e){s.loading=e},SET_ERROR(s,e){s.error=e}},actions:{async fetchDevices({commit:s}){try{s("SET_LOADING",!0);const e=await ps.A.get("http://127.0.0.1:8007/api/devices");s("SET_DEVICES",e.data.devices)}catch(e){s("SET_ERROR",e.message)}finally{s("SET_LOADING",!1)}},async fetchStatistics({commit:s}){try{s("SET_LOADING",!0);const e=await ps.A.get("http://127.0.0.1:8007/api/statistics");s("SET_STATISTICS",e.data.statistics)}catch(e){s("SET_ERROR",e.message)}finally{s("SET_LOADING",!1)}}},getters:{onlineDevices:s=>s.devices.filter(s=>s.online),offlineDevices:s=>s.devices.filter(s=>!s.online),deviceById:s=>e=>s.devices.find(s=>s.id===e)}});var Ee=a(1656),Te=a(7655),Ae=a(2835),Se=a(4878),xe=a(1081),Re=a(4512),Ie=a(81),ze=a(1637),We=a(3244),Me=a(2812),Ve=a(365);const Ye=(0,t.Ef)(j);Ye.component("DataTable",Te.A),Ye.component("Column",Ae.A),Ye.component("Chart",Se.A),Ye.component("Card",xe.A),Ye.component("Button",Re.A),Ye.component("Calendar",Ie.A),Ye.component("Dialog",ze.A),Ye.component("Toast",We.A),Ye.component("ProgressSpinner",Ve.A),Ye.use(De),Ye.use(we),Ye.use(Ee.Ay),Ye.use(Me.A),Ye.mount("#app")}},e={};function a(t){var l=e[t];if(void 0!==l)return l.exports;var i=e[t]={id:t,loaded:!1,exports:{}};return s[t].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=s,(()=>{var s=[];a.O=(e,t,l,i)=>{if(!t){var n=1/0;for(d=0;d<s.length;d++){for(var[t,l,i]=s[d],c=!0,o=0;o<t.length;o++)(!1&i||n>=i)&&Object.keys(a.O).every(s=>a.O[s](t[o]))?t.splice(o--,1):(c=!1,i<n&&(n=i));if(c){s.splice(d--,1);var r=l();void 0!==r&&(e=r)}}return e}i=i||0;for(var d=s.length;d>0&&s[d-1][2]>i;d--)s[d]=s[d-1];s[d]=[t,l,i]}})(),(()=>{a.n=s=>{var e=s&&s.__esModule?()=>s["default"]:()=>s;return a.d(e,{a:e}),e}})(),(()=>{a.d=(s,e)=>{for(var t in e)a.o(e,t)&&!a.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})}})(),(()=>{a.f={},a.e=s=>Promise.all(Object.keys(a.f).reduce((e,t)=>(a.f[t](s,e),e),[]))})(),(()=>{a.u=s=>"js/"+s+".2eccfbd9.js"})(),(()=>{a.miniCssF=s=>{}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(s){if("object"===typeof window)return window}}()})(),(()=>{a.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e)})(),(()=>{var s={},e="monitoring-frontend:";a.l=(t,l,i,n)=>{if(s[t])s[t].push(l);else{var c,o;if(void 0!==i)for(var r=document.getElementsByTagName("script"),d=0;d<r.length;d++){var u=r[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==e+i){c=u;break}}c||(o=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.setAttribute("data-webpack",e+i),c.src=t),s[t]=[l];var v=(e,a)=>{c.onerror=c.onload=null,clearTimeout(p);var l=s[t];if(delete s[t],c.parentNode&&c.parentNode.removeChild(c),l&&l.forEach(s=>s(a)),e)return e(a)},p=setTimeout(v.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=v.bind(null,c.onerror),c.onload=v.bind(null,c.onload),o&&document.head.appendChild(c)}}})(),(()=>{a.r=s=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})}})(),(()=>{a.nmd=s=>(s.paths=[],s.children||(s.children=[]),s)})(),(()=>{a.p="/"})(),(()=>{var s={524:0};a.f.j=(e,t)=>{var l=a.o(s,e)?s[e]:void 0;if(0!==l)if(l)t.push(l[2]);else{var i=new Promise((a,t)=>l=s[e]=[a,t]);t.push(l[2]=i);var n=a.p+a.u(e),c=new Error,o=t=>{if(a.o(s,e)&&(l=s[e],0!==l&&(s[e]=void 0),l)){var i=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",c.name="ChunkLoadError",c.type=i,c.request=n,l[1](c)}};a.l(n,o,"chunk-"+e,e)}},a.O.j=e=>0===s[e];var e=(e,t)=>{var l,i,[n,c,o]=t,r=0;if(n.some(e=>0!==s[e])){for(l in c)a.o(c,l)&&(a.m[l]=c[l]);if(o)var d=o(a)}for(e&&e(t);r<n.length;r++)i=n[r],a.o(s,i)&&s[i]&&s[i][0](),s[i]=0;return a.O(d)},t=self["webpackChunkmonitoring_frontend"]=self["webpackChunkmonitoring_frontend"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})();var t=a.O(void 0,[504],()=>a(8469));t=a.O(t)})();
//# sourceMappingURL=app.02c6d4ed.js.map